<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biologia: Krew</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #ffebee; /* Bardzo jasny czerwony */
            margin: 0;
            padding: 10px;
            text-align: center;
            color: #b71c1c;
        }
        #container {
            background-color: white;
            padding: 20px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
            border: 4px solid #ef5350;
        }
        h1 { margin-bottom: 20px; font-size: 26px; }
        
        .btn-big {
            display: block;
            width: 100%;
            padding: 20px;
            margin: 15px 0;
            border: none;
            border-radius: 20px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            color: white;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        .btn-big:active { transform: translateY(4px); box-shadow: none; }
        
        .btn-audio { background-color: #ef5350; } /* Czerwony */
        .btn-quiz { background-color: #66bb6a; margin-top: 30px;} /* Zielony */
        .btn-opt { background-color: #ffcdd2; color: #b71c1c; font-size: 18px; padding: 15px; box-shadow: 0 4px 0 #e57373;}
        
        .hidden { display: none; }
        .emoji { font-size: 40px; }

        /* Quiz Styles */
        .correct { background-color: #66bb6a !important; color: white !important; }
        .wrong { background-color: #bdbdbd !important; opacity: 0.6; }
        #feedback { font-weight: bold; min-height: 30px; margin-top: 10px; font-size: 20px;}
    </style>
</head>
<body>

<div id="container">

    <div id="menu">
        <a href="../index.html" style="position:absolute; top:10px; left:10px; text-decoration:none; font-size:30px;">üè†</a>
        <h1>ü©∏ Krew: Rzeka ≈ªycia</h1>
        <p>Julia, dzisiaj tylko s≈Çuchamy. Kliknij i zamknij oczy.</p>

        <button class="btn-big btn-audio" onclick="playLesson(1)">
            <span class="emoji">ü•§</span> 1. Co to jest Osocze?
        </button>

        <button class="btn-big btn-audio" onclick="playLesson(2)">
            <span class="emoji">üöë</span> 2. Krwinki (Zadania)
        </button>
        
        <button class="btn-big btn-audio" onclick="playLesson(3)">
            <span class="emoji">üÖæÔ∏è</span> 3. Grupy Krwi (Extra)
        </button>

        <button class="btn-big btn-quiz" onclick="startQuiz()">
            <span class="emoji">üéì</span> Sprawd≈∫ wiedzƒô (Quiz)
        </button>
    </div>

    <div id="quiz" class="hidden">
        <h2 id="q-text">Pytanie...</h2>
        <div id="options"></div>
        <div id="feedback"></div>
        <button id="next-btn" class="btn-big btn-audio hidden" onclick="nextQuestion()">Dalej ‚û°</button>
    </div>

    <div id="end" class="hidden">
        <h1>Brawo! üéâ</h1>
        <p>Odpoczywaj. Jeste≈õ super!</p>
        <button class="btn-big btn-quiz" onclick="location.reload()">Jeszcze raz?</button>
        <br>
        <a href="../index.html" class="btn-big btn-audio">Wr√≥ƒá do bazy</a>
    </div>

</div>

<script>
    // --- DANE LEKCJI (AUDIO) ---
    const lessons = {
        1: "Cze≈õƒá Julia. Wyobra≈∫ sobie krew jako zupƒô. Woda w tej zupie to OSOCZE. Osocze to g≈Ç√≥wnie woda, ale p≈ÇywajƒÖ w niej rozpuszczone sk≈Çadniki: glukoza, czyli jedzenie dla kom√≥rek, sole mineralne, hormony i dwutlenek wƒôgla, kt√≥ry organizm wyrzuca. Pamiƒôtaj: Osocze to p≈Çynna baza.",
        2: "Teraz " + "gƒôste" + " w zupie, czyli krwinki. Mamy trzy rodzaje. Pierwsze to ERYTROCYTY, czyli czerwone krwinki. To sƒÖ taks√≥wki. Wo≈ºƒÖ tlen z p≈Çuc do kom√≥rek. Drugie to LEUKOCYTY, bia≈Çe krwinki. To sƒÖ ≈ºo≈Çnierze. WalczƒÖ z bakteriami i wirusami. Trzecie to P≈ÅYTKI KRWI. To sƒÖ plasterki. Jak siƒô skaleczysz, one robiƒÖ strup i tamujƒÖ krew.",
        3: "Na koniec grupy krwi. SƒÖ cztery g≈Ç√≥wne: A, B, AB oraz zero. Ka≈ºda z nich mo≈ºe mieƒá czynnik Rh plus, albo minus. To wa≈ºne przy transfuzji, czyli podawaniu krwi w szpitalu. Musisz dostaƒá takƒÖ grupƒô, kt√≥ra pasuje do Twojej."
    };

    // --- DANE QUIZU ---
    const quizData = [
        {
            q: "Z czego w wiƒôkszo≈õci sk≈Çada siƒô krew?",
            a: ["Z osocza (wody)", "Z t≈Çuszczu", "Z ko≈õci"],
            correct: 0,
            feedback: "Tak! Osocze to p≈Çynna baza."
        },
        {
            q: "Co robiƒÖ Erytrocyty (Czerwone krwinki)?",
            a: ["WalczƒÖ z wirusami", "TransportujƒÖ tlen", "RobiƒÖ strupy"],
            correct: 1,
            feedback: "Brawo! SƒÖ jak czerwone taks√≥wki z tlenem."
        },
        {
            q: "Kto broni nas przed bakteriami (Odporno≈õƒá)?",
            a: ["P≈Çytki krwi", "Erytrocyty", "Leukocyty (Bia≈Çe)"],
            correct: 2,
            feedback: "Dok≈Çadnie. Leukocyty to ≈ºo≈Çnierze."
        },
        {
            q: "Co robiƒÖ P≈Çytki Krwi przy skaleczeniu?",
            a: ["TamujƒÖ krew (skrzep)", "TransportujƒÖ tlen", "Nic nie robiƒÖ"],
            correct: 0,
            feedback: "Super. Dzia≈ÇajƒÖ jak naturalny plaster."
        },
        {
            q: "Jakie sƒÖ grupy krwi?",
            a: ["Tylko A i B", "A, B, AB, 0", "X, Y, Z"],
            correct: 1,
            feedback: "≈öwietnie. Pamiƒôtaj te≈º o Rh plus i minus."
        }
    ];

    // --- LOGIKA ---
    let currentQ = 0;

    function speak(text) {
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(text);
        u.lang = 'pl-PL';
        u.rate = 0.9; // Trochƒô wolniej dla zmƒôczonej g≈Çowy
        window.speechSynthesis.speak(u);
    }

    function playLesson(num) {
        speak(lessons[num]);
    }

    function startQuiz() {
        document.getElementById('menu').classList.add('hidden');
        document.getElementById('quiz').classList.remove('hidden');
        currentQ = 0;
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQ >= quizData.length) {
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('end').classList.remove('hidden');
            speak("Koniec! Odpoczywaj kochanie.");
            return;
        }

        const data = quizData[currentQ];
        document.getElementById('q-text').innerText = data.q;
        document.getElementById('feedback').innerText = "";
        document.getElementById('next-btn').classList.add('hidden');
        
        // Czytaj pytanie
        speak(data.q);

        const optsDiv = document.getElementById('options');
        optsDiv.innerHTML = "";

        data.a.forEach((ans, index) => {
            const btn = document.createElement('button');
            btn.className = 'btn-big btn-opt';
            btn.innerText = ans;
            btn.onclick = () => checkAnswer(index, btn);
            optsDiv.appendChild(btn);
        });
    }

    function checkAnswer(idx, btn) {
        const data = quizData[currentQ];
        const allBtns = document.querySelectorAll('.btn-opt');
        
        // Blokada klikania
        allBtns.forEach(b => b.onclick = null);

        if (idx === data.correct) {
            btn.classList.add('correct');
            document.getElementById('feedback').innerText = data.feedback;
            speak("Dobrze! " + data.feedback);
        } else {
            btn.classList.add('wrong');
            allBtns[data.correct].classList.add('correct'); // Poka≈º dobrƒÖ
            speak("Pomy≈Çka. Prawid≈Çowa to: " + data.a[data.correct]);
        }
        
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function nextQuestion() {
        currentQ++;
        loadQuestion();
    }
</script>

</body>
</html>
