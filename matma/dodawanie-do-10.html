<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matma: Trening MÃ³zgu</title>
    <style>
        /* STYL GÅÃ“WNY - CZYSTA MATEMATYKA */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e3f2fd; /* Spokojny bÅ‚Ä™kit */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            color: #0d47a1;
        }

        #container {
            background-color: white;
            padding: 20px;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 600px; /* WÄ™Å¼szy dla skupienia */
            border: 4px solid #1976d2;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 { margin: 0 0 20px 0; font-size: 28px; color: #1565c0; }
        
        /* WIZUALIZACJA LICZB */
        .dots-container {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
            align-items: center;
        }
        .number-box {
            border: 2px solid #bbdefb;
            border-radius: 10px;
            padding: 10px;
            min-width: 80px;
        }
        .dots {
            font-size: 24px;
            letter-spacing: 2px;
            line-height: 1.2;
            color: #1976d2;
        }
        .dots.secondary { color: #d32f2f; } /* Drugi skÅ‚adnik czerwony */
        
        .equation {
            font-size: 60px;
            font-weight: bold;
            margin: 10px 0;
            font-family: monospace; /* StaÅ‚a szerokoÅ›Ä‡ cyfr */
        }

        /* PRZYCISKI */
        .btn-big {
            background-color: #2196f3;
            color: white;
            border: none;
            padding: 25px 30px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 6px 0 #0d47a1;
            transition: 0.1s;
            margin: 15px 0;
            width: 100%;
        }
        .btn-big:active { transform: translateY(4px); box-shadow: none; }
        .btn-explain { background-color: #ffca28; color: #333; box-shadow: 0 6px 0 #ff6f00; }

        .explanation-text {
            font-size: 22px;
            color: #333;
            margin-top: 20px;
            font-weight: 500;
            min-height: 60px;
        }

        .hidden { display: none !important; }

    </style>
</head>
<body>

<div id="container">
    
    <div id="step-start">
        <h1>Matematyczny SiÅ‚acz ğŸ’ª</h1>
        <p>Julia, koniec z palcami. Uczymy siÄ™ sprytnego liczenia w gÅ‚owie.</p>
        <p>Zasada: <strong>DopeÅ‚niamy do dychy!</strong></p>
        
        <button class="btn-big" onclick="playAudio('intro')">ğŸ“¢ PosÅ‚uchaj zasad</button>
        <br>
        <button class="btn-big" style="background-color: #4caf50;" onclick="startTraining()">START TRENINGU ğŸš€</button>
    </div>

    <div id="step-train" class="hidden">
        <div id="progress" style="color:#888;">PrzykÅ‚ad 1</div>
        
        <div class="equation" id="math-eq">8 + 5</div>

        <div class="dots-container">
            <div class="number-box">
                <div class="dots" id="dots-1">â—â—â—â—<br>â—â—â—â—</div>
            </div>
            <div style="font-size:30px;">+</div>
            <div class="number-box">
                <div class="dots secondary" id="dots-2">â—â—<br>â—â—â—</div>
            </div>
        </div>

        <button id="btn-reveal" class="btn-big btn-explain" onclick="revealAnswer()">ğŸ¤” Jak to policzyÄ‡?</button>
        
        <div id="answer-section" class="hidden">
            <div class="equation" style="color: #2e7d32;" id="math-result">= 13</div>
            <div class="explanation-text" id="math-explain">...</div>
            <button class="btn-big" onclick="nextEquation()">NastÄ™pny PrzykÅ‚ad â¡</button>
        </div>
    </div>

</div>

<script>
    // --- BAZA PRZYKÅADÃ“W (Dodawanie z przekroczeniem progu 10) ---
    // a = pierwszy skÅ‚adnik, b = drugi skÅ‚adnik
    // strategy: tekst, ktÃ³ry przeczyta Hania
    const mathData = [
        { 
            a: 8, b: 5, 
            res: 13, 
            dots1: "â—â—â—â—<br>â—â—â—â—", 
            dots2: "â—â—<br>â—â—â—",
            txt: "Osiem potrzebuje dwÃ³ch, Å¼eby byÄ‡ dziesiÄ…tkÄ…. Te dwa zabieramy z piÄ…tki. ZostaÅ‚o trzy. WiÄ™c mamy trzynaÅ›cie."
        },
        { 
            a: 9, b: 6, 
            res: 15, 
            dots1: "â—â—â—â—â—<br>â—â—â—â—", 
            dots2: "â—â—â—<br>â—â—â—",
            txt: "DziewiÄ™Ä‡ potrzebuje tylko jednego. Zabierasz jeden z szÃ³stki. Zostaje piÄ™Ä‡. Razem piÄ™tnaÅ›cie."
        },
        { 
            a: 7, b: 4, 
            res: 11, 
            dots1: "â—â—â—â—<br>â—â—â—", 
            dots2: "â—â—<br>â—â—",
            txt: "SiÃ³demka lubi siÄ™ z trÃ³jkÄ…. Zabierz trzy od czwÃ³rki. Zostanie jeden. Wynik to jedenaÅ›cie."
        },
        { 
            a: 6, b: 6, 
            res: 12, 
            dots1: "â—â—â—<br>â—â—â—", 
            dots2: "â—â—â—<br>â—â—â—",
            txt: "SzeÅ›Ä‡ i szeÅ›Ä‡. SzeÅ›Ä‡ potrzebuje czterech do dychy. Z drugiej szÃ³stki zabieramy cztery, zostajÄ… dwa. Razem dwanaÅ›cie."
        },
        { 
            a: 8, b: 7, 
            res: 15, 
            dots1: "â—â—â—â—<br>â—â—â—â—", 
            dots2: "â—â—â—â—<br>â—â—â—",
            txt: "Osiem chce dwa. Zabieramy dwa z siÃ³demki, zostaje piÄ™Ä‡. Wynik piÄ™tnaÅ›cie."
        },
        { 
            a: 5, b: 9, 
            res: 14, 
            dots1: "â—â—â—<br>â—â—", 
            dots2: "â—â—â—â—â—<br>â—â—â—â—",
            txt: "Tu jest Å‚atwiej odwrÃ³ciÄ‡. DziewiÄ™Ä‡ plus piÄ™Ä‡. DziewiÄ™Ä‡ bierze jeden. Z piÄ…tki zostaje cztery. CzternaÅ›cie."
        }
    ];

    let currentIndex = 0;
    let shuffledData = [];

    // AUDIO
    function speak(text) {
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(text);
        u.lang = 'pl-PL';
        u.rate = 1.0;
        
        // PrÃ³ba znalezienia Google PL
        const voices = window.speechSynthesis.getVoices();
        const plVoice = voices.find(v => v.lang === 'pl-PL' && v.name.includes('Google'));
        if (plVoice) u.voice = plVoice;
        
        window.speechSynthesis.speak(u);
    }

    function playAudio(type) {
        if(type === 'intro') {
            speak("CzeÅ›Ä‡ Julia. Dzisiaj trenujemy mÃ³zg. Nie uÅ¼ywaj palcÃ³w. SprÃ³buj sobie wyobraziÄ‡, ile brakuje do dziesiÄ™ciu. Zaczynamy.");
        }
    }

    // LOGIKA
    function startTraining() {
        // Mieszamy
        shuffledData = [...mathData].sort(() => 0.5 - Math.random());
        currentIndex = 0;
        document.getElementById('step-start').classList.add('hidden');
        document.getElementById('step-train').classList.remove('hidden');
        loadExample();
    }

    function loadExample() {
        if(currentIndex >= shuffledData.length) {
            // Restart lub koniec
            speak("Brawo! Wszystkie przykÅ‚ady zrobione. Odpocznij chwilÄ™.");
            alert("Koniec treningu na dziÅ›!");
            location.reload();
            return;
        }

        const item = shuffledData[currentIndex];
        
        // Reset widoku
        document.getElementById('answer-section').classList.add('hidden');
        document.getElementById('btn-reveal').classList.remove('hidden');
        document.getElementById('progress').innerText = `PrzykÅ‚ad ${currentIndex+1}`;
        
        // Dane
        document.getElementById('math-eq').innerText = `${item.a} + ${item.b}`;
        document.getElementById('dots-1').innerHTML = item.dots1;
        document.getElementById('dots-2').innerHTML = item.dots2;

        // Lektor czyta rÃ³wnanie
        speak(`${item.a} dodaÄ‡ ${item.b}`);
    }

    function revealAnswer() {
        const item = shuffledData[currentIndex];
        
        document.getElementById('btn-reveal').classList.add('hidden');
        document.getElementById('answer-section').classList.remove('hidden');
        
        document.getElementById('math-result').innerText = `= ${item.res}`;
        document.getElementById('math-explain').innerText = item.txt;
        
        // Lektor tÅ‚umaczy strategiÄ™
        speak(item.txt);
    }

    function nextEquation() {
        currentIndex++;
        loadExample();
    }

</script>

</body>
</html>
