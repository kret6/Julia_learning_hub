<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemia: Trening + Test</title>
    <style>
        /* Styl "Julia Protocol" - Czysto≈õƒá, Dostƒôpno≈õƒá */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e0f2f1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
        }

        #main-container {
            background-color: white;
            padding: 30px;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 900px;
            border: 4px solid #00897b;
            min-height: 600px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 { color: #004d40; margin-bottom: 10px; }
        
        /* --- STYL FISZEK (TRENING) --- */
        .flashcard-container {
            perspective: 1000px;
            width: 100%;
            height: 350px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .front {
            background-color: #00796b;
            color: white;
        }

        .back {
            background-color: #b2dfdb;
            color: #004d40;
            transform: rotateY(180deg);
            border: 4px solid #00796b;
        }

        .term-text { font-size: 40px; font-weight: bold; }
        .def-text { font-size: 28px; line-height: 1.4; }

        /* --- STYL QUIZU --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .btn {
            background-color: #4db6ac;
            color: white;
            border: none;
            padding: 25px;
            font-size: 22px;
            font-weight: 600;
            border-radius: 20px;
            cursor: pointer;
            box-shadow: 0 6px 0 #00695c;
            transition: 0.2s;
        }

        .btn:hover { background-color: #26a69a; transform: translateY(-2px); }
        .btn:active { transform: translateY(4px); box-shadow: none; }
        
        .correct { background-color: #66bb6a !important; box-shadow: 0 6px 0 #2e7d32 !important; }
        .wrong { background-color: #ef5350 !important; opacity: 0.6; }

        /* --- NAWIGACJA --- */
        .nav-btn {
            background-color: #ffb74d;
            color: #3e2723;
            border: none;
            padding: 15px 40px;
            font-size: 24px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 6px 0 #f57c00;
        }
        
        .mode-switch {
            margin-bottom: 20px;
            padding: 10px;
            background: #e0f2f1;
            border-radius: 15px;
            color: #00695c;
            font-weight: bold;
        }

        #feedback { font-size: 24px; font-weight: bold; height: 40px; margin-top: 10px; color: #004d40; }

        @media (max-width: 768px) {
            .options-grid { grid-template-columns: 1fr; }
            .flashcard-container { height: 400px; }
            .term-text { font-size: 32px; }
            .def-text { font-size: 22px; }
        }
    </style>
</head>
<body>

<div id="main-container">
    <div class="mode-switch" id="mode-display">TRYB: NAUKA POJƒòƒÜ (Fiszki)</div>

    <div id="flashcard-section">
        <div class="flashcard-container" onclick="flipCard()">
            <div class="flashcard" id="card">
                <div class="front">
                    <div style="font-size: 20px; margin-bottom: 10px; opacity: 0.8;">Kliknij, aby zobaczyƒá definicjƒô</div>
                    <div class="term-text" id="term">≈Åadowanie...</div>
                    <div style="font-size: 40px; margin-top: 20px;">üîÑ</div>
                </div>
                <div class="back">
                    <div class="def-text" id="definition">...</div>
                </div>
            </div>
        </div>
        <button class="nav-btn" onclick="nextCard()">Nastƒôpne Pojƒôcie ‚û°</button>
        <div style="margin-top: 20px;">
            <button class="btn" style="background-color: #004d40; font-size: 18px; padding: 15px;" onclick="startQuiz()">
                Ju≈º umiem! Przejd≈∫ do TESTU üìù
            </button>
        </div>
    </div>

    <div id="quiz-section" style="display: none;">
        <div id="progress">Pytanie 1</div>
        <div id="question-text" style="font-size: 28px; font-weight: bold; margin: 20px 0;">...</div>
        <div class="options-grid" id="options-container"></div>
        <div id="feedback"></div>
        <button class="nav-btn" id="next-quiz-btn" style="display:none;" onclick="nextQuestion()">Dalej ‚û°</button>
    </div>
</div>

<script>
    // --- BAZA POJƒòƒÜ (Z PODRƒòCZNIKA) ---
    const concepts = [
        { t: "DYFUZJA", d: "Samoistne mieszanie siƒô czƒÖsteczek. Np. zapach perfum rozchodzi siƒô w powietrzu." },
        { t: "ATOM", d: "Najmniejsza czƒÖstka pierwiastka, kt√≥ra zachowuje jego w≈Ça≈õciwo≈õci. Sk≈Çada siƒô z jƒÖdra i elektron√≥w." },
        { t: "CZƒÑSTECZKA", d: "Trwa≈Çe po≈ÇƒÖczenie co najmniej dw√≥ch atom√≥w (np. woda H‚ÇÇO)." },
        { t: "Liczba Atomowa (Z)", d: "To 'PESEL' pierwiastka. M√≥wi, ile ma PROTON√ìW w jƒÖdrze (i elektron√≥w na pow≈Çokach)." },
        { t: "Liczba Masowa (A)", d: "To masa atomu. Suma PROTON√ìW i NEUTRON√ìW." },
        { t: "IZOTOPY", d: "Bli≈∫niaki tego samego pierwiastka. MajƒÖ tyle samo proton√≥w, ale r√≥≈ºnƒÖ liczbƒô neutron√≥w (r√≥≈ºnƒÖ masƒô)." },
        { t: "PROTON", d: "CzƒÖstka w jƒÖdrze o ≈Çadunku DODATNIM (+)." },
        { t: "ELEKTRON", d: "CzƒÖstka krƒÖ≈ºƒÖca wok√≥≈Ç jƒÖdra o ≈Çadunku UJEMNYM (-). Nic nie wa≈ºy." },
        { t: "NEUTRON", d: "CzƒÖstka w jƒÖdrze OBOJƒòTNA (bez ≈Çadunku). Wa≈ºy tyle co proton." },
        { t: "POW≈ÅOKA WALENCYJNA", d: "Ostatnia, zewnƒôtrzna pow≈Çoka atomu. To ona decyduje, jak pierwiastek reaguje." },
        { t: "OKRES (w uk≈Çadzie)", d: "Poziomy rzƒÖd. Jego numer m√≥wi, ile atom ma POW≈ÅOK (piƒôter)." },
        { t: "GRUPA (w uk≈Çadzie)", d: "Pionowa kolumna. Jej numer m√≥wi, ile atom ma elektron√≥w WALENCYJNYCH." },
        { t: "Unit (u)", d: "Jednostka masy atomowej. Jest bardzo, bardzo ma≈Ça." }
    ];

    // --- BAZA PYTA≈É TESTOWYCH ---
    const questionBank = [
        { q: "Jak brzmi PRAWO OKRESOWO≈öCI Mendelejewa?", a: ["W≈Ça≈õciwo≈õci pierwiastk√≥w powtarzajƒÖ siƒô okresowo", "W≈Ça≈õciwo≈õci sƒÖ losowe", "Pierwiastki sƒÖ u≈Ço≈ºone alfabetycznie", "Masa zawsze maleje"], c: 0 },
        { q: "Co to jest DYFUZJA?", a: ["Samorzutne mieszanie siƒô czƒÖsteczek", "Wybuch jƒÖdrowy", "Topnienie lodu", "Parowanie wody"], c: 0 },
        { q: "Gdzie w atomie sƒÖ PROTONY?", a: ["W jƒÖdrze", "Na pow≈Çokach", "LatajƒÖ swobodnie", "Nie ma ich"], c: 0 },
        { q: "Jaki ≈Çadunek ma ELEKTRON?", a: ["Ujemny (-)", "Dodatni (+)", "Obojƒôtny (0)", "Zmienny"], c: 0 },
        { q: "Co m√≥wi nam numer GRUPY (1, 2, 13-18)?", a: ["Ile jest elektron√≥w walencyjnych", "Ile jest pow≈Çok", "Ile wa≈ºy atom", "Jaki ma kolor"], c: 0 },
        { q: "Co m√≥wi nam numer OKRESU?", a: ["Ile atom ma pow≈Çok elektronowych", "Ile ma proton√≥w", "Ile ma neutron√≥w", "Ile ma elektron√≥w"], c: 0 },
        { q: "Co to sƒÖ IZOTOPY?", a: ["Atomy tego samego pierwiastka o r√≥≈ºnej liczbie neutron√≥w", "R√≥≈ºne pierwiastki", "B≈Çƒôdy w atomie", "CzƒÖsteczki wody"], c: 0 },
        { q: "Najl≈ºejszy izotop wodoru (bez neutron√≥w) to:", a: ["Prot", "Deuter", "Tryt", "Hel"], c: 0 },
        { q: "Liczba Atomowa (Z) m√≥wi nam o liczbie:", a: ["Proton√≥w", "Neutron√≥w", "Pow≈Çok", "Masie"], c: 0 },
        { q: "Gdzie skupiona jest masa atomu?", a: ["W jƒÖdrze atomowym", "W elektronach", "W chmurze elektronowej", "R√≥wnomiernie"], c: 0 }
    ];

    // --- LOGIKA FISZEK ---
    let cardIndex = 0;
    const card = document.getElementById('card');
    const termEl = document.getElementById('term');
    const defEl = document.getElementById('definition');

    function loadCard() {
        card.classList.remove('flipped');
        setTimeout(() => {
            termEl.innerText = concepts[cardIndex].t;
            defEl.innerText = concepts[cardIndex].d;
        }, 200);
    }

    function flipCard() {
        if (!card.classList.contains('flipped')) {
            card.classList.add('flipped');
            speak(concepts[cardIndex].d); // Lektor czyta definicjƒô po obr√≥ceniu
        } else {
            card.classList.remove('flipped');
            window.speechSynthesis.cancel();
        }
    }

    function nextCard() {
        window.speechSynthesis.cancel();
        cardIndex = (cardIndex + 1) % concepts.length;
        loadCard();
    }

    function speak(text) {
        if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'pl-PL';
            utterance.rate = 1.0;
            const voices = window.speechSynthesis.getVoices();
            const plVoice = voices.find(v => v.lang === 'pl-PL' && v.name.includes('Google'));
            if (plVoice) utterance.voice = plVoice;
            window.speechSynthesis.speak(utterance);
        }
    }

    // --- LOGIKA QUIZU ---
    let qIndex = 0;
    let questions = [];

    function startQuiz() {
        document.getElementById('flashcard-section').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        document.getElementById('mode-display').innerText = "TRYB: SPRAWDZIAN WIEDZY";
        document.getElementById('mode-display').style.backgroundColor = "#ffe0b2";
        document.getElementById('mode-display').style.color = "#e65100";
        
        // Mieszanie pyta≈Ñ
        questions = questionBank.sort(() => Math.random() - 0.5).map(q => {
            q.a = q.a.map((opt, i) => ({t: opt, ok: i===q.c})).sort(() => Math.random() - 0.5);
            return q;
        });
        loadQuestion();
    }

    function loadQuestion() {
        if (qIndex >= questions.length) {
            document.getElementById('quiz-container').innerHTML = "<h1>Koniec! Jeste≈õ gotowa!</h1>";
            return;
        }
        const q = questions[qIndex];
        document.getElementById('progress').innerText = `Pytanie ${qIndex + 1} z ${questions.length}`;
        document.getElementById('question-text').innerText = q.q;
        document.getElementById('feedback').innerText = "";
        document.getElementById('next-quiz-btn').style.display = "none";
        
        const cont = document.getElementById('options-container');
        cont.innerHTML = "";
        q.a.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.innerText = opt.t;
            btn.onclick = () => check(opt.ok, btn, q);
            cont.appendChild(btn);
        });
    }

    function check(isOk, btn, q) {
        const allBtns = document.querySelectorAll('.options-grid .btn');
        if (isOk) {
            btn.classList.add('correct');
            document.getElementById('feedback').innerText = "BRAWO! Dok≈Çadnie tak! ‚úÖ";
            speak("Dobrze!");
        } else {
            btn.classList.add('wrong');
            allBtns.forEach(b => {
                if (q.a.find(o => o.t === b.innerText).ok) b.classList.add('correct');
            });
            document.getElementById('feedback').innerText = "Pomy≈Çka. Zobacz zielone.";
        }
        document.getElementById('next-quiz-btn').style.display = 'block';
    }

    function nextQuestion() {
        qIndex++;
        loadQuestion();
    }

    // Start
    loadCard();

</script>
</body>
</html>
